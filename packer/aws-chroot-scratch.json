{
  "//": "Copyright 2021 Green River IT (GreenRiverIT.com) as described in LICENSE.txt distributed with this project on GitHub.",
  "//": "Start at https://github.com/AgileCloudInstitute?tab=repositories",
  "variables": {
    "aws_access_key": "",
    "aws_secret_key": ""
  },
  "builders": [
    {
      "type": "amazon-chroot",
      "access_key": "{{user `aws_access_key`}}",
      "secret_key": "{{user `aws_secret_key`}}",
      "region": "us-west-2",
      "ami_name": "packer-from-scratch {{timestamp}}",
      "from_scratch": true,
      "ami_virtualization_type": "hvm",
      "pre_mount_commands": [
        "parted {{.Device}} mklabel msdos mkpart primary 1M 100% set 1 boot on print",
        "mkfs.ext4 {{.Device}}1"
      ],
      "root_volume_size": 15,
      "root_device_name": "xvda",
      "ami_block_device_mappings": [
        {
          "device_name": "xvda",
          "delete_on_termination": true,
          "volume_type": "gp2"
        }
      ]
    }
  ],
  "provisioners": [
    {
      "type": "shell",
      "script": ""
    }
  ]
}
